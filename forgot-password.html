<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <title>Forgot Password</title>
</head>

<body>

    <h2>Forgot Password</h2>
    <i>Enter your email below to receive a link to reset your password.</i><br><br>
    <input type="email" id="email" placeholder="Enter your email"><br><br>
    <button onclick="resetPassword()">Send Reset Link</button>
    <p id="message"></p>

    <!-- Supabase JS CDN -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <script>
        const supabaseUrl = "https://xcgzdeupoteayfiorscj.supabase.co";
        const supabaseKey = "sb_publishable_2B60fPIaI1PiLYcvCfgGYA_KveaLaEv";
        const supabaseClient = supabase.createClient(supabaseUrl, supabaseKey);

        async function resetPassword() {
            const email = document.getElementById("email").value;

            if(email.trim() == ""){
                alert("Please enter your email address.");
                return;
            }

            const { error } = await supabaseClient.auth.resetPasswordForEmail(
                email,
                {
                    redirectTo: "https://db-access-test.vercel.app/reset-password.html"
                }
            );

            document.getElementById("message").textContent =
                error ? error.message : "Check your email for the reset link.";
        }

    </script>

</body>

</html>